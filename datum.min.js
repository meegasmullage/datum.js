(function(g){var f=new function(){var e=this;e.compile=function(a,d){var c=d.toString(),b=c.indexOf("{"),h=c.lastIndexOf("}"),b=c.substring(b+1,h).replace(/(base)(\([\s]*\))/gmi,function(b,a,c){return a+".constructor.call(this)"}),b=b.replace(/(base)[\s]*\(([\w+\s\,{0,1}]+)\)/gmi,function(b,a,c){return a+".constructor.call(this,"+c+")"}),b=b.replace(/(base)\.([\s]*[\w]+[\s]*)\([\s]*\)/gmi,function(b,a,c){return a+"."+c+".call(this)"}),b=b.replace(/(base)\.([\s]*[\w]+[\s]*)\(([\w+\s\,{0,1}]+)\)/gmi,
function(b,a,c,d){return a+"."+c+".call(this,"+d+")"}),b=b.replace(/this[\s]*\.[\s]*(base)[\s]*([\.|\(]+)/gmi,function(b,c,d){return"this."+a+d});return(c=(c=c.match(/^function[\s]*[\w]*[\s]*\(([\w\s\,]*)\)[\s]*\{/mi))&&c[1]?c[1]:null)?new Function(c,b):new Function(b)};e.define=function(a){if(a.__meta){if(!a.__meta["extends"])return a;var d=a.__meta["extends"],c={};a.__meta["extends"]={__meta:d.__meta};for(var b in d)"function"===typeof d[b]&&(c[b]=d[b]),a[b]?"function"===typeof a[b]&&(a[b]=e.compile(d.__meta.name,
a[b])):a[b]=d[b];a[d.__meta.name]=c;return a}};e.clone=function(a){var d=[],c=function(b){for(var a in b){var e=typeof b[a];"string"===e?(e=b[a].match(/^__FN(\d+)__$/i))&&(b[a]=d[e[1]-1]):"object"===e&&c(b[a])}return b};a=JSON.stringify(a,function(a,c){return"function"===typeof c?"__FN"+d.push(c)+"__":c});a=JSON.parse(a);return c(a)};e.create=function(a){var d=this.clone(a),c=Array.prototype.slice.call(arguments,1);d.constructor.apply(d,c);return d}};g.datum={define:f.define,clone:f.clone,create:f.create}})(window);