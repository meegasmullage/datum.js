(function(g){var f=new function(){var e=this;e.compile=function(a,c){var d=c.toString(),b=d.indexOf("{"),h=d.lastIndexOf("}"),b=d.substring(b+1,h).replace(/(base)(\([\s]*\))/gmi,function(b,a,c){return a+".constructor.call(this)"}),b=b.replace(/(base)[\s]*\(([\w+\s\,{0,1}]+)\)/gmi,function(b,a,c){return a+".constructor.call(this,"+c+")"}),b=b.replace(/(base)\.([\s]*[\w]+[\s]*)\([\s]*\)/gmi,function(b,a,c){return a+"."+c+".call(this)"}),b=b.replace(/(base)\.([\s]*[\w]+[\s]*)\(([\w+\s\,{0,1}]+)\)/gmi,
function(b,a,c,d){return a+"."+c+".call(this,"+d+")"}),b=b.replace(/this[\s]*\.[\s]*(base)[\s]*([\.|\(]+)/gmi,function(b,c,d){return"this."+a+d});return(d=(d=d.match(/^function[\s]*[\w]*[\s]*\(([\w\s\,]*)\)[\s]*\{/mi))&&d[1]?d[1]:null)?new Function(d,b):new Function(b)};e.define=function(a){if(a.__meta){if(!a.__meta["extends"])return a;var c=a.__meta["extends"],d={};a.__meta["extends"]={__meta:c.__meta};for(var b in c)"function"===typeof c[b]&&(d[b]=c[b]),a[b]?"function"===typeof a[b]&&(a[b]=e.compile(c.__meta.name,
a[b])):a[b]=c[b];a[c.__meta.name]=d;return a}};e.clone=function(a){var c=[],d=function(b){for(var a in b){var e=typeof b[a];"string"===e?(e=b[a].match(/^__FN(\d+)__$/i))&&(b[a]=c[e[1]-1]):"object"===e&&d(b[a])}return b};a=JSON.stringify(a,function(a,d){return"function"===typeof d?"__FN"+c.push(d)+"__":d});a=JSON.parse(a);return d(a)};e.create=function(a){var c=this.clone(a),d=Array.prototype.slice.call(arguments,1);c.constructor&&"function"===typeof c.constructor&&c.constructor.apply(c,d);return c}};
g.datum={define:f.define,clone:f.clone,create:f.create}})(window);